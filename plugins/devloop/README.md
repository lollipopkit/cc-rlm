[English](README.md) | [简体中文](README.zh-CN.md)

# devloop

A Claude Code plugin that moves tasks/issues to a mergeable PR through an iterative loop:

1. **Create Branch**: Always create a new descriptive branch based on the issue/task content.
2. **Implement Fix**: Research and implement the correct fix or implementation.
3. **Commit**: Create a clear commit message.
4. **Pull Request**: Open a PR for review.
5. **Wait for Review**: Poll for review comments.
6. **Handle Feedback**: Apply changes based on review comments and commit/push again.
7. **Repeat**: Iteratively perform the review and feedback loop until the PR is approved or merged.

## Installation

```bash
/plugin marketplace add lollipopkit/cc-plugins
/plugin install devloop@lk-ccp
```

## Components

- Command: `commands/devloop.md` (workflow definition)
- Agent: `agents/devloop-runner.md`
- Commands:
  - `/devloop` – Start or resume the workflow
  - `/devloop-enable` – Create/update `.claude/devloop.local.md`
- Hook:
  - `hooks/hooks.json` – Stop hook that can send IM notifications using user-provided command templates

## Configuration

Create `.claude/devloop.local.md` in your project root.

Minimal template:

```markdown
---
enabled: true
base_branch: "main"

# Review behavior
max_review_polls: 40
review_poll_seconds: 60

# Wait for review behavior
wait_behavior: "poll"   # poll|ping_ai
ping_message_template: "@{{ai_id}} This PR is awaiting review feedback. Could you provide an update?"
ping_threshold: 3       # number of wait rounds before pinging (minimum 1)

# Notifications (optional)
notify_enabled: false
notify_shell: "auto"            # auto|bash|fish
notify_on_stop: true
notify_command_template: ""      # executed with selected shell
---

Generated by <https://github.com/lollipopkit/cc-plugins>

```
